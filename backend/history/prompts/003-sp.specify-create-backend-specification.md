---
id: PHR-001
title: Phase II Backend Specification Creation
stage: spec
date: 2026-01-13
feature: Phase II Backend Specification
---

# Phase II Backend Specification Creation

## Summary
Created the Phase II Backend Specification document for the Hackathon II Todo App, defining the behavioral requirements for the backend without implementation details.

## Prompt Text
```
create "Phase II Backend Specification"

Description:
Define the detailed backend behavior and specifications for Phase II of the Hackathon II Todo Full-Stack Web Application.
This specification describes WHAT the backend must do, not HOW it is implemented.

Requirements:
1. Write the specification inside:
   - fullstackwebapp/backend/sp.specify

2. The specification must strictly follow:
   - Backend constitution
   - Spec-driven development rules
   - Beginner-friendly clarity
   - No implementation details

3. Include the following sections:

## Backend Role Overview
Explain the role of the backend as:
- Stateless REST API provider
- JWT-verifying service
- Data persistence and enforcement layer
- Source of truth for tasks

## Authentication & User Identification
Define backend authentication behavior:
- All requests require a valid JWT token
- Token is received via Authorization: Bearer <token>
- Backend verifies token signature using shared secret
- Backend extracts user identity (user_id, email)
- Requests without token → 401 Unauthorized
- Invalid or expired token → 401 Unauthorized

## User Isolation Rules
Clearly specify:
- Backend never trusts user_id sent from frontend alone
- Authenticated user identity must match request context
- Backend only accesses tasks belonging to authenticated user
- Any mismatch → request rejected

## Task Ownership Model
Define task ownership rules:
- Each task belongs to exactly one user
- User ID is derived from JWT, not request body
- Ownership is enforced on every operation
- Tasks cannot be transferred between users

## Task CRUD Behavior
Specify behavior for each operation:

### Create Task
- Requires authenticated user
- Title is mandatory
- Task is automatically associated with authenticated user
- Default state: incomplete

### List Tasks
- Returns only tasks owned by authenticated user
- Supports filtering by completion status
- Never returns other users' tasks

### Get Task by ID
- Task must belong to authenticated user
- Nonexistent task → 404 Not Found
- Unauthorized access → 403 Forbidden

### Update Task
- Only owner may update
- Supports updating title, description, completion status
- Ownership is validated before update

### Delete Task
- Only owner may delete
- Deletion is permanent
- Ownership validated before deletion

### Toggle Completion
- Only owner may toggle
- Flips completion state only
- No other fields modified

## Error Handling Rules
Define backend error behavior:
- 401 → Missing or invalid authentication
- 403 → Authenticated but unauthorized access
- 404 → Resource not found
- 400 → Invalid input data

## Data Integrity Rules
- Backend validates all inputs
- Backend enforces ownership rules
- Backend never relies on frontend validation
- Backend maintains consistent task state

## Non-Responsibilities
Explicitly state backend does NOT:
- Handle UI rendering
- Manage frontend sessions
- Store frontend auth state
- Control navigation or layouts

## Spec Discipline
- This spec must be followed before any implementation
- No backend code may be written without referencing this spec
- Changes require spec updates first

4. Writing Constraints:
- No code
- No database schema
- No endpoint definitions
- No framework-specific syntax
- Clear and simple language

Instructions for Claude:
- Write the specification only
- Do not implement anything
- Confirm completion
```

## Response Summary
Successfully created the Phase II Backend Specification document at `fullstackwebapp/backend/sp.specify` with all required sections. The specification defines the backend's role as a stateless REST API provider, JWT-verifying service, data persistence and enforcement layer, and source of truth for tasks. It includes detailed sections on authentication, user isolation, task ownership, CRUD operations, error handling, data integrity, and non-responsibilities. The specification adheres to all constraints with no implementation details, code, or framework-specific syntax.